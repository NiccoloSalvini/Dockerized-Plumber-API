---
title: "Dockerized API Scraping [Immobiliare.it](https://www.immobiliare.it/)"
output: 
  github_document:
    toc: TRUE
    toc_depth: 3
    fig_width: 5
    fig_height: 5
---

<!-- README.md is generated from README.Rmd. Please edit that file -->




```{r global.options, include=FALSE}
knitr::opts_chunk$set(
  warning = FALSE,  
  strip.white = TRUE,                 # if FALSE knitr will not remove white spaces at the beg or end
  fig.path = "img/",                  # file path to the directory DESTINATION where knitr shall store the
  fig.width=12,                       # the width for plots created by code chunk
  fig.height=8,                       # the height for plots created by code chunk
  cache = FALSE                       # if TRUE knitr will cache the results to reuse in future knits
)


knitr::knit_hooks$set(imgcenter = function(before, options, envir){  # to center image 
  if (before) {                                                      # add imgcenter = TRUE
    htmltools::HTML("<p align='center'>")                            # to the chunk options
  } else {
    htmltools::HTML("</p>")
  }
})
```

x

<img src="img/logo.png" align="right" height="80" />
 
## API Infrastructure

[![Maintenance](https://img.shields.io/badge/Maintained%3F-yes-green.svg)](https://GitHub.com/Naereen/StrapDown.js/graphs/commit-activity) <a href="https://www.buymeacoffee.com/gbraad" target="_blank"><img src="img/orange_img.png" alt="Buy Me A Coffee" style="height: 41px !important;width: 174px !important;box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;" ></a>

<script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="niccosalvini" data-color="#FFDD00" data-emoji=""  data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000" data-font-color="#000" data-coffee-color="#fff" ></script>

_author_: **[Niccol√≤ Salvini](https://niccolosalvini.netlify.app/)**
_date_: `r format(Sys.Date(), "%d %B, %Y")`


<br> 

 
This **REST API** provides a way for platform/language independent access to the public [Immobiliare.it](https://www.immobiliare.it/) database of Real Estate rental market. By default it provides to the scraping functions the corrisponding Milan url connected to its Real Estate market, it will be possible for sure to provide only the city information in the very next future. It can be extended also for other cities by providing different urls. API are managed by `Plumber` which is a R framework to build APIs. They are containerized in a Docker container which will be hosted on AWS EC2 server. 
On top of that each day a scheduler runs scraping functions and store daily data on a DB that can be queried by this API ( _in itinere_ ):
<br><br>


```{r FIRENZE, echo=FALSE, imgcenter = TRUE, fig.retina=1}
knitr::include_graphics("img/dpapi.png") 
```


## API Documentation:  

- Get fast raw data, 5 covariates: title, price, num of rooms, sqmeter, primarykey
```r
      GET */scrape

      param url _string_ the category link from which you are interested to extract data
      param npages _positive integer_ number of pages to be scrapped starting from page 1 
      content-type: application/json 
```
- Get all the links 

```r
      GET */link

      param url _string_  the category link from which you are interested to extract data
      param npages  _positive integer_  num of pages you are interested in
      content-type: application/json 
```   
      
-  Get the complete data from single links (not the raw)

```r

      GET */complete

      param _string_ url you you want to extract info from
      param npages _positive integer_  num of pages you are interested starting from the url param
      content-type: application/json
            

```

 